### Kylin应用场景

即席查询，能进行预聚合的场景

### Kylin架构

![image-20220604104352535](C:\Users\wei50\AppData\Roaming\Typora\typora-user-images\image-20220604104352535.png)

- Cube build Engine构建引擎（Spark），对接外部数据源，将数据存储为列式存储，存储再hdfs或者hbase中
- metadata 元数据，存储再mysql中
- routing 路由层 为查询引擎提供引导
- Query Engine 查询引擎（Spark）当在构建好的数据存储系统找不到数据时，会在数据源层找到数据（Yarn管理）
- REST Server，供Web和BI使用数据展示

### Kylin Cube

Kylin Cube优化

- 剪枝优化：因为cuboid数量过多，会导致需要聚合的数据过多，cube就会迅速增大，所以可以过滤一些不必要的维度
  - 衍生维度：创建Cube的时候，把维度表的某些字段定义为衍生维度，kylin就会排除这些维度，用维度的表的主键来进行聚合。
  - 聚合组

